#!/bin/bash
# constitutional - Unified CLI for Constitutional AI
# Usage: constitutional <command> [args]

# Resolve symlink to get actual directory
SOURCE="${BASH_SOURCE[0]}"
while [ -L "$SOURCE" ]; do
    DIR="$(cd -P "$(dirname "$SOURCE")" && pwd)"
    SOURCE="$(readlink "$SOURCE")"
    [[ $SOURCE != /* ]] && SOURCE="$DIR/$SOURCE"
done
SCRIPT_DIR="$(cd -P "$(dirname "$SOURCE")" && pwd)"
VENV_DIR="$SCRIPT_DIR/venv"

# Activate venv if exists
if [ -f "$VENV_DIR/bin/activate" ]; then
    source "$VENV_DIR/bin/activate"
fi

# Run CLI
exec python3 "$SCRIPT_DIR/constitutional_cli.py" "$@"
